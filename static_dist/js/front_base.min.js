function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxEvent()},FrontBase.prototype.listenAuthBoxEvent=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},$(function(){font_base=new FrontBase,font_base.run()}),Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSiginEvent(),t.listensImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenSiginupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin_btn"),e=$(".signup_btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listensImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/acount/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptchaEvent=function(){var a=$(".sms-captcha-btn"),n=$(".signup-group input[name='telephone']");a.click(function(){var t=n.val();t||messageBox.show(message="请输入手机号码！"),xfzajax.get({url:"/acount/sms_captcha/",data:{telepone:t},success:function(t){if(200==t.code){messageBox.showSuccess("短信验证码发送成功！"),a.addClass("disabled");var n=60,e=setInterval(function(){a.text(n+"s"),(n-=1)<=0&&(clearInterval(e),a.removeClass("disabled"),a.text("发送验证码"))},1e3)}},fail:function(t){console.log(t)}})})},Auth.prototype.listenSiginEvent=function(){var n=this,t=$(".signin-group"),e=t.find("input[name='telephone']"),a=t.find("input[name='password']"),s=t.find("input[name='remember']");t.find(".submit-btn").click(function(){telepone=e.val(),password=a.val(),remember=s.prop("checked"),xfzajax.post({url:"/acount/login/",data:{telepone:telepone,password:password,remember:remember?1:0},success:function(t){n.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSiginupEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),a=f.find("input[name='img_captcha']"),s=f.find("input[name='password1']"),i=f.find("input[name='password2']"),o=f.find("input[name='sms_captcha']"),r=n.val(),c=e.val(),p=a.val(),u=s.val(),l=i.val(),h=o.val();xfzajax.post({url:"/acount/register/",data:{telepone:r,username:c,img_captcha:p,password1:u,password2:l,sms_captcha:h},success:function(t){window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"天前"):n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()+"/ "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEV2ZW50IiwiYXV0aEJveCIsInVzZXJNb2VyQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsImZvbnRfYmFzZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWdpbkV2ZW50IiwibGlzdGVuc0ltZ0NhcHRjaGFFdmVudCIsImxpc3RlblNtc0NhcHRjaGFFdmVudCIsImxpc3RlblNpZ2ludXBFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNpZ25pbl9idG4iLCJzaWdudXBfYnRuIiwiY2xvc2VfYnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwiY3VycmVudExlZnQiLCJwYXJzZUludCIsImFuaW1hdGUiLCJpbWdDYXB0Y2hhIiwiYXR0ciIsIk1hdGgiLCJyYW5kb20iLCJzbXNDYXB0aGNhIiwidGVsZXBvbmVJbnB1dCIsInRlbGVwb25lIiwidmFsIiwibWVzc2FnZUJveCIsIm1lc3NhZ2UiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJzaG93U3VjY2VzcyIsImFkZENsYXNzIiwiY291bnQiLCJ0aW1lciIsInNldEludGVydmFsIiwidGV4dCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVDbGFzcyIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzaWdpbkdyb3VwIiwidGVsZXBob25lSW5wdXQiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsInBvc3QiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInNpZ251cEdyb3VwIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsYUErQlQsU0FBU0MsT0FDTUMsS0FDTkMsWUFBY0MsRUFBRSxpQkFEVkYsS0FFTkcsY0FBZ0JELEVBQUUsbUJBOUIzQkosVUFBVU0sVUFBVUMsSUFBTSxXQUNYTCxLQUNOTSxzQkFJVFIsVUFBVU0sVUFBVUUsbUJBQXFCLFdBQ3ZDLElBQUlDLEVBQVVMLEVBQUUsYUFDWk0sRUFBY04sRUFBRSxrQkFDcEJLLEVBQVFFLE1BQU0sV0FDWEQsRUFBWUUsUUFDYixXQUNFRixFQUFZRyxVQU1sQlQsRUFBRSxXQUNDVSxVQUFZLElBQUlkLFVBQ2hCYyxVQUFVUCxRQWFiTixLQUFLSyxVQUFVQyxJQUFNLFdBQ2pCLElBQUlRLEVBQU9iLEtBQ1hhLEVBQUtDLHNCQUNMRCxFQUFLRSxvQkFDTEYsRUFBS0csbUJBQ0xILEVBQUtJLHlCQUNMSixFQUFLSyx3QkFDTEwsRUFBS00sc0JBSVRwQixLQUFLSyxVQUFVZ0IsVUFBWSxXQUNacEIsS0FDTkMsWUFBWVMsUUFHckJYLEtBQUtLLFVBQVVpQixVQUFZLFdBQ1pyQixLQUNOQyxZQUFZVSxRQUdyQlosS0FBS0ssVUFBVVUsb0JBQXNCLFdBQ2pDLElBQUlELEVBQU1iLEtBQ05zQixFQUFhcEIsRUFBRSxlQUNmcUIsRUFBYXJCLEVBQUUsZUFDZnNCLEVBQVd0QixFQUFFLGNBQ2pCb0IsRUFBV0csTUFBTSxXQUNiWixFQUFLTyxZQUNMUCxFQUFLVixjQUFjdUIsSUFBSSxDQUFDQyxLQUFPLE1BRW5DSixFQUFXRSxNQUFNLFdBQ2RaLEVBQUtPLFlBQ0xQLEVBQUtWLGNBQWN1QixJQUFJLENBQUNDLE1BQVEsUUFFbkNILEVBQVVDLE1BQU0sV0FDYlosRUFBS1EsZUFJWnRCLEtBQUtLLFVBQVVXLGtCQUFvQixXQUMvQixJQUFJRixFQUFPYixLQUNJRSxFQUFFLFdBQ1J1QixNQUFNLFdBRVgsSUFBSUcsRUFBY2YsRUFBS1YsY0FBY3VCLElBQUksU0FDekNFLEVBQWNDLFNBQVNELElBQ04sRUFDYmYsRUFBS1YsY0FBYzJCLFFBQVEsQ0FBQ0gsS0FBTyxNQUVuQ2QsRUFBS1YsY0FBYzJCLFFBQVEsQ0FBQ0gsS0FBTyxjQU0vQzVCLEtBQUtLLFVBQVVhLHVCQUF5QixXQUNwQyxJQUFJYyxFQUFhN0IsRUFBRSxnQkFDbkI2QixFQUFXTixNQUFNLFdBQ2JNLEVBQVdDLEtBQUssTUFBTSwrQkFBa0NDLEtBQUtDLGFBSXJFbkMsS0FBS0ssVUFBVWMsc0JBQXdCLFdBQ25DLElBQUlpQixFQUFhakMsRUFBRSxvQkFDZmtDLEVBQWdCbEMsRUFBRSx5Q0FDdEJpQyxFQUFXVixNQUFNLFdBQ2QsSUFBSVksRUFBV0QsRUFBY0UsTUFDekJELEdBQ0FFLFdBQVc3QixLQUFLOEIsUUFBUSxZQUU1QkMsUUFBUUMsSUFBSSxDQUNSQyxJQUFNLHVCQUNOQyxLQUFPLENBQ0hQLFNBQVdBLEdBRWZRLFFBQVUsU0FBVUMsR0FDaEIsR0FBcUIsS0FBbEJBLEVBQWEsS0FBUyxDQUNyQlAsV0FBV1EsWUFBWSxjQUN2QlosRUFBV2EsU0FBUyxZQUNwQixJQUFJQyxFQUFRLEdBQ1JDLEVBQVFDLFlBQVksV0FDckJoQixFQUFXaUIsS0FBS0gsRUFBTSxNQUN0QkEsR0FBUyxJQUNDLElBQ05JLGNBQWNILEdBQ2RmLEVBQVdtQixZQUFZLFlBQ3ZCbkIsRUFBV2lCLEtBQUssV0FFckIsT0FHVkcsS0FBTyxTQUFVQyxHQUNiQyxRQUFRQyxJQUFJRixTQU8zQnpELEtBQUtLLFVBQVVZLGlCQUFrQixXQUM3QixJQUFJSCxFQUFPYixLQUNQMkQsRUFBYXpELEVBQUUsaUJBQ2YwRCxFQUFpQkQsRUFBV0UsS0FBSywyQkFDakNDLEVBQWdCSCxFQUFXRSxLQUFLLDBCQUNoQ0UsRUFBZ0JKLEVBQVdFLEtBQUssMEJBQ25CRixFQUFXRSxLQUFLLGVBQ3RCcEMsTUFBTSxXQUNkWSxTQUFXdUIsRUFBZXRCLE1BQzFCMEIsU0FBV0YsRUFBY3hCLE1BQ3pCMkIsU0FBV0YsRUFBY0csS0FBSyxXQUU5QnpCLFFBQVEwQixLQUFLLENBQ1J4QixJQUFNLGlCQUNOQyxLQUFPLENBQ0hQLFNBQVdBLFNBQ1gyQixTQUFXQSxTQUNYQyxTQUFXQSxTQUFTLEVBQUUsR0FFM0JwQixRQUFVLFNBQVVDLEdBQ2ZqQyxFQUFLUSxZQUNMK0MsT0FBT0MsU0FBU0MsZUFNaEN2RSxLQUFLSyxVQUFVZSxtQkFBcUIsV0FDaEMsSUFBSW9ELEVBQWNyRSxFQUFFLGlCQUNKcUUsRUFBWVYsS0FBSyxlQUN2QnBDLE1BQU0sU0FBVStDLEdBQ3RCQSxFQUFNQyxpQkFDTixJQUFJckMsRUFBZ0JtQyxFQUFZVixLQUFLLDJCQUNqQ2EsRUFBZ0JILEVBQVlWLEtBQUssMEJBQ2pDYyxFQUFrQkosRUFBWVYsS0FBSyw2QkFDbkNlLEVBQWlCTCxFQUFZVixLQUFLLDJCQUNsQ2dCLEVBQWlCTixFQUFZVixLQUFLLDJCQUNsQ2lCLEVBQWtCUCxFQUFZVixLQUFLLDZCQUVuQ3hCLEVBQVdELEVBQWNFLE1BQ3pCeUMsRUFBV0wsRUFBY3BDLE1BQ3pCMEMsRUFBY0wsRUFBZ0JyQyxNQUM5QjJDLEVBQVlMLEVBQWV0QyxNQUMzQjRDLEVBQVlMLEVBQWV2QyxNQUMzQjZDLEVBQWNMLEVBQWdCeEMsTUFFbENHLFFBQVEwQixLQUFLLENBQ1R4QixJQUFPLG9CQUNQQyxLQUFRLENBQ0pQLFNBQVlBLEVBQ1owQyxTQUFZQSxFQUNaQyxZQUFlQSxFQUNmQyxVQUFhQSxFQUNiQyxVQUFhQSxFQUNiQyxZQUFlQSxHQUVuQnRDLFFBQVcsU0FBVUMsR0FDakJzQixPQUFPQyxTQUFTQyxlQU9oQ3BFLEVBQUUsWUFDWSxJQUFJSCxNQUNWTSxRQUdSSCxFQUFFLFdBQ0lrRSxPQUFPZ0IsV0FDTkEsU0FBU0MsU0FBU0MsUUFBUUMsVUFBWSxTQUFVQyxHQUMvQyxJQUFJQyxFQUFPLElBQUlDLEtBQUtGLEdBQ2hCRyxFQUFTRixFQUFLRyxVQUVkQyxJQURRLElBQUtILE1BQVFFLFVBQ0FELEdBQVEsSUFDakMsT0FBR0UsRUFBWSxHQUNKLEtBRVcsSUFBYkEsR0FBbUJBLEVBQVksTUFDcENDLFFBQVVqRSxTQUFTZ0UsRUFBWSxJQUN4QkMsUUFBVSxPQUVBLE1BQWJELEdBQXNCQSxFQUFZLE9BQ3RDRSxNQUFRbEUsU0FBU2dFLEVBQVksR0FBSyxJQUMzQkUsTUFBUSxPQUVHLE9BQWJGLEdBQXlCQSxFQUFZLFFBRTFDRyxLQUFPbkUsU0FBU2dFLEVBQVksR0FBSyxHQUFLLElBQy9CRyxLQUFPLE1BR0hQLEVBQUtRLGNBS0osSUFKQVIsRUFBS1MsV0FJSyxJQUhaVCxFQUFLVSxTQUdlLEtBRm5CVixFQUFLVyxXQUUyQixJQUQvQlgsRUFBS1kiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+eUqOadpeWkhOeQhueUqOaIt+aCrOa1ruahhumXrumimFxuZnVuY3Rpb24gRnJvbnRCYXNlKCkge1xuXG59O1xuXG5Gcm9udEJhc2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5saXN0ZW5BdXRoQm94RXZlbnQoKTtcblxufTtcblxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5BdXRoQm94RXZlbnQgPSBmdW5jdGlvbigpe1xuICB2YXIgYXV0aEJveCA9ICQoJy5hdXRoLWJveCcpO1xuICB2YXIgdXNlck1vZXJCb3ggPSAkKCcudXNlci1tb3JlLWJveCcpO1xuICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgdXNlck1vZXJCb3guc2hvdygpO1xuICB9LGZ1bmN0aW9uICgpIHtcbiAgICAgIHVzZXJNb2VyQm94LmhpZGUoKTtcbiAgfSk7XG5cbn07XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICBmb250X2Jhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XG4gICBmb250X2Jhc2UucnVuKClcbn0pO1xuXG5cblxuLy/nlKjmnaXlpITnkIbnlKjmiLfnmbvlvZXpl67pophcblxuZnVuY3Rpb24gQXV0aCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlciA9ICQoJy5tYXNrLXdyYXBwZXInKTtcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKFwiLnNjcm9sbC13cmFwcGVyXCIpO1xufTtcblxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TaWdpbkV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5zSW1nQ2FwdGNoYUV2ZW50KCk7XG4gICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcbiAgICBzZWxmLmxpc3RlblNpZ2ludXBFdmVudCgpXG5cbn07XG5cbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlci5zaG93KCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbiAoKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9dGhpcztcbiAgICB2YXIgc2lnbmluX2J0biA9ICQoJy5zaWduaW5fYnRuJyk7XG4gICAgdmFyIHNpZ251cF9idG4gPSAkKCcuc2lnbnVwX2J0bicpO1xuICAgIHZhciBjbG9zZV9idG4gPSQoJy5jbG9zZS1idG4nKVxuICAgIHNpZ25pbl9idG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHsnbGVmdCc6MH0pXG4gICAgfSk7XG4gICAgc2lnbnVwX2J0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgc2VsZi5zaG93RXZlbnQoKTtcbiAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHsnbGVmdCc6LTQwMH0pXG4gICAgfSk7XG4gICAgY2xvc2VfYnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xuICAgIH0pO1xufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc3dpdGNoZXIgPSAkKFwiLnN3aXRjaFwiKTtcbiAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xuICAgICAgICBpZihjdXJyZW50TGVmdCA8IDApe1xuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOicwJ30pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjpcIi00MDBweFwifSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuc0ltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKCcuaW1nLWNhcHRjaGEnKVxuICAgIGltZ0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpbWdDYXB0Y2hhLmF0dHIoXCJzcmNcIixcIi9hY291bnQvaW1nX2NhcHRjaGEvXCIrXCI/cmFuZG9tPVwiK01hdGgucmFuZG9tKCkpXG4gICAgfSk7XG59O1xuXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzbXNDYXB0aGNhID0gJCgnLnNtcy1jYXB0Y2hhLWJ0bicpO1xuICAgIHZhciB0ZWxlcG9uZUlucHV0ID0gJChcIi5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgc21zQ2FwdGhjYS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgdmFyIHRlbGVwb25lID0gdGVsZXBvbmVJbnB1dC52YWwoKTtcbiAgICAgICBpZighdGVsZXBvbmUpe1xuICAgICAgICAgICBtZXNzYWdlQm94LnNob3cobWVzc2FnZT0n6K+36L6T5YWl5omL5py65Y+356CB77yBJylcbiAgICAgICB9XG4gICAgICAgeGZ6YWpheC5nZXQoe1xuICAgICAgICAgICAndXJsJzonL2Fjb3VudC9zbXNfY2FwdGNoYS8nLFxuICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgJ3RlbGVwb25lJzp0ZWxlcG9uZVxuICAgICAgICAgICB9LFxuICAgICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip/vvIEnKTtcbiAgICAgICAgICAgICAgICAgICBzbXNDYXB0aGNhLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDYwO1xuICAgICAgICAgICAgICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzbXNDYXB0aGNhLnRleHQoY291bnQrJ3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICBjb3VudCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgIGlmKGNvdW50PD0wKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNtc0NhcHRoY2EucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNtc0NhcHRoY2EudGV4dCgn5Y+R6YCB6aqM6K+B56CBJylcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgfSwxMDAwKTtcbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfSxcbiAgICAgICAgICAgJ2ZhaWwnOmZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICB9XG4gICAgICAgfSlcbiAgICB9KTtcblxufTtcblxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnaW5FdmVudCA9ZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHNpZ2luR3JvdXAgPSAkKCcuc2lnbmluLWdyb3VwJyk7XG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWdpbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xuICAgIHZhciByZW1lbWJlcklucHV0ID0gc2lnaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZW1iZXInXVwiKTtcbiAgICB2YXIgc3VibWl0X2J0biA9IHNpZ2luR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcbiAgICBzdWJtaXRfYnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICB0ZWxlcG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xuICAgICAgIHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dC52YWwoKTtcbiAgICAgICByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcCgnY2hlY2tlZCcpO1xuXG4gICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOicvYWNvdW50L2xvZ2luLycsXG4gICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICd0ZWxlcG9uZSc6dGVsZXBvbmUsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzpwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOnJlbWVtYmVyPzE6MCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KXtcbiAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgfSxcbiAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ2ludXBFdmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNpZ251cEdyb3VwID0gJCgnLnNpZ251cC1ncm91cCcpO1xuICAgIHZhciBzdWJtaXRCdG4gPSBzaWdudXBHcm91cC5maW5kKCcuc3VibWl0LWJ0bicpO1xuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRlbGVwb25lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XG4gICAgICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xuICAgICAgICB2YXIgcGFzc3dvcmQySW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQyJ11cIik7XG4gICAgICAgIHZhciBzbXNDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc21zX2NhcHRjaGEnXVwiKTtcblxuICAgICAgICB2YXIgdGVsZXBvbmUgPSB0ZWxlcG9uZUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xuICAgICAgICB2YXIgaW1nX2NhcHRjaGEgPSBpbWdDYXB0Y2hhSW5wdXQudmFsKCk7XG4gICAgICAgIHZhciBwYXNzd29yZDEgPSBwYXNzd29yZDFJbnB1dC52YWwoKTtcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xuICAgICAgICB2YXIgc21zX2NhcHRjaGEgPSBzbXNDYXB0Y2hhSW5wdXQudmFsKCk7XG5cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Fjb3VudC9yZWdpc3Rlci8nLFxuICAgICAgICAgICAgJ2RhdGEnOiB7XG4gICAgICAgICAgICAgICAgJ3RlbGVwb25lJzogdGVsZXBvbmUsXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nX2NhcHRjaGEsXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMSc6IHBhc3N3b3JkMSxcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzogcGFzc3dvcmQyLFxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6IHNtc19jYXB0Y2hhXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0pO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICB2YXIgYXV0aCA9IG5ldyBBdXRoKCk7XG4gICBhdXRoLnJ1bigpO1xufSk7XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgaWYod2luZG93LnRlbXBsYXRlKXtcbiAgICAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xuICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7IC8vIOW+l+WIsOeahOaYr+avq+enknNoaWppYW5cbiAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsgLy/lvpfliLDnmoTmmK/lvZPliY3ml7bpl7TmiLNcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGV0cykvMTAwMDsgLy8g6Zmk5LulMTAwMO+8jOW+l+WIsOenkuaVsFxuICAgICAgICBpZih0aW1lc3RhbXAgPCA2MCl7XG4gICAgICAgICAgICByZXR1cm4gJ+WImuWImic7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKSB7XG4gICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApO1xuICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRpbWVzdGFtcCA+PSA2MCo2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCkge1xuICAgICAgICAgICAgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwKTtcbiAgICAgICAgICAgIHJldHVybiBob3VycyArICflsI/ml7bliY0nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoIHRpbWVzdGFtcCA+PSA2MCo2MCoyNCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCozMClcbiAgICAgICAge1xuICAgICAgICAgICAgZGF5cyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwIC8gNjAgLyAyNCk7XG4gICAgICAgICAgICByZXR1cm4gZGF5cyArICflpKnliY0nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICB2YXIgbWludGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgIHJldHVybiB5ZWFyKycvJyttb250aCsnLycrZGF5KycvJysnICcraG91citcIjpcIittaW50ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICB9XG59KTsiXX0=
