function Banners(){}Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图！"):n.createBanner()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find('span[class="priority"]'),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成！")),s.text("优先级："+e))}})})},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBanner(t)}}})},Banners.prototype.createBanner=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxpc3RlbkFkZEJhbm5lckV2ZW50Iiwic2VsZiIsInRoaXMiLCIkIiwiY2xpY2siLCJjaGlsZHJlbiIsImxlbmd0aCIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93SW5mbyIsImNyZWF0ZUJhbm5lciIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJiYW5uZXJJdGVtIiwiaW1hZ2UiLCJmaW5kIiwiaW1hZ2VJbnB1dCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsImF0dHIiLCJhZGRSZW1vdmVFdmVudCIsImJhbm5lcklkIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUNhbGxiYWNrIiwiYmFubmVyX2lkIiwicmVtb3ZlIiwic2hvd1N1Y2Nlc3MiLCJhZGRTYXZlQmFubmVyRXZlbnQiLCJzYXZlQnRuIiwiaW1hZ2VUYWciLCJwcmlvcml0eVRhZyIsImxpbmt0b1RhZyIsInByaW9yaXR5U3BhbiIsImltYWdlX3VybCIsInByaW9yaXR5IiwidmFsIiwibGlua190byIsInBrIiwibG9hZERhdGEiLCJnZXQiLCJiYW5uZXJzIiwiaSIsImJhbm5lciIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwicHJlcGVuZCIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsV0FJVEEsUUFBUUMsVUFBVUMscUJBQXVCLFdBQ3JDLElBQUlDLEVBQU9DLEtBQ0VDLEVBQUUsbUJBQ1JDLE1BQU0sV0FHSSxHQUZTRCxFQUFFLHNCQUNLRSxXQUFXQyxPQUVwQ0MsT0FBT0MsV0FBV0MsU0FBUyxnQkFHL0JSLEVBQUtTLGtCQUliWixRQUFRQyxVQUFVWSxvQkFB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QUlMLFNBQ1Y4RCIsImZpbGUiOiJiYW5uZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcnMoKSB7XG5cbn1cblxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbigpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYWRkQnRuID0gJCgnI2FkZC1iYW5uZXItYnRuJyk7XG4gICAgYWRkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xuICAgICAgICB2YXIgbGVuZ3RoID0gYmFubmVyTGlzdEdyb3VwLmNoaWxkcmVuKCkubGVuZ3RoO1xuICAgICAgICBpZihsZW5ndGggPj0gNil7XG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbygn5pyA5aSa5Y+q6IO95re75YqgNuW8oOi9ruaSreWbvu+8gScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVyKCk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRJbWFnZVNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pe1xuICAgIHZhciBpbWFnZSA9IGJhbm5lckl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcbiAgICAvLyDlm77niYfmmK/kuI3og73miZPlvIDmiZPlvIDmlofku7bpgInmi6nmoYbnmoTvvIzlj6rog73pgJrov4dpbnB1dOOAkHR5cGU9J2ZpbGUn44CRXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7XG4gICAgfSk7XG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLGZpbGUpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6Jy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzpmb3JtRGF0YSxcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6ZmFsc2UsXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOmZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UuYXR0cignc3JjJyx1cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRSZW1vdmVFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmNsb3NlLWJ0bicpO1xuICAgIGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xuICAgICAgICBpZihiYW5uZXJJZCl7XG4gICAgICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xuICAgICAgICAgICAgICAgICd0ZXh0Jzon5oKo56Gu5a6a6KaB5Yig6Zmk6L+Z5Liq6L2u5pKt5Zu+5ZCX77yfJyxcbiAgICAgICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzpmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzonL2Ntcy9kZWxldGVfYmFubmVyLycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOmJhbm5lcklkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuWIoOmZpOaIkOWKnycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRTYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcbiAgICB2YXIgc2F2ZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLnNhdmUtYnRuJyk7XG4gICAgdmFyIGltYWdlVGFnID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcbiAgICB2YXIgbGlua3RvVGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0nbGlua190byddXCIpO1xuICAgIHZhciBwcmlvcml0eVNwYW4gPSBiYW5uZXJJdGVtLmZpbmQoJ3NwYW5bY2xhc3M9XCJwcmlvcml0eVwiXScpO1xuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cihcImRhdGEtYmFubmVyLWlkXCIpO1xuICAgIHZhciB1cmwgPSAnJztcbiAgICBpZihiYW5uZXJJZCl7XG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLyc7XG4gICAgfWVsc2V7XG4gICAgICAgIHVybCA9ICcvY21zL2FkZF9iYW5uZXIvJztcbiAgICB9XG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbWFnZV91cmwgPSBpbWFnZVRhZy5hdHRyKCdzcmMnKTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKCk7XG4gICAgICAgIHZhciBsaW5rX3RvID0gbGlua3RvVGFnLnZhbCgpO1xuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6dXJsLFxuICAgICAgICAgICAgJ2RhdGEnOntcbiAgICAgICAgICAgICAgICAnaW1hZ2VfdXJsJzppbWFnZV91cmwsXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5Jzpwcmlvcml0eSxcbiAgICAgICAgICAgICAgICAnbGlua190byc6bGlua190byxcbiAgICAgICAgICAgICAgICAncGsnOmJhbm5lcklkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOmZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYmFubmVySWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuS/ruaUueaIkOWKn++8gScpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lcklkID0gcmVzdWx0WydkYXRhJ11bJ2Jhbm5lcl9pZCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsYmFubmVySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvua3u+WKoOWujOaIkO+8gScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qn77yaXCIrcHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5sb2FkRGF0YSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgJ3VybCc6Jy9jbXMvYmFubmVyX2xpc3QnLFxuICAgICAgICAnc3VjY2Vzcyc6ZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDtpPGJhbm5lcnMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lcihiYW5uZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59O1xuXG5CYW5uZXJzLnByb3RvdHlwZS5jcmVhdGVCYW5uZXIgPSBmdW5jdGlvbihiYW5uZXIpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ2Jhbm5lci1pdGVtJyx7J2Jhbm5lcic6YmFubmVyfSk7XG4gICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xuICAgIHZhciBiYW5uZXJJdGVtID0gbnVsbDtcbiAgICBpZihiYW5uZXIpe1xuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZCgnLmJhbm5lci1pdGVtOmxhc3QnKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgYmFubmVyTGlzdEdyb3VwLnByZXBlbmQodHBsKTtcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKCcuYmFubmVyLWl0ZW06Zmlyc3QnKTtcbiAgICB9XG4gICAgc2VsZi5hZGRJbWFnZVNlbGVjdEV2ZW50KGJhbm5lckl0ZW0pO1xuICAgIHNlbGYuYWRkUmVtb3ZlRXZlbnQoYmFubmVySXRlbSk7XG4gICAgc2VsZi5hZGRTYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XG5cbn07XG5cbkJhbm5lcnMucHJvdG90eXBlLnJ1biA9ZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XG4gICAgc2VsZi5sb2FkRGF0YSgpO1xufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICB2YXIgYmFubmVycyA9IG5ldyBCYW5uZXJzKCk7XG4gICBiYW5uZXJzLnJ1bigpO1xufSk7Il19
